<div class="max-w-screen">
  <nav class="navbar bg-white p-1 fixed w-full top-0 z-20 mb-11">
    <div class="navbar-start h-5">
      <div class="dropdown" data-controller="sidebar">
        <div tabindex="0" role="button" class="btn btn-ghost  btn-circle" data-action="click->sidebar#toggle">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
          </svg>
        </div>
        <div data-sidebar-target="menu" class="hidden">
          <ul tabindex="0" data-sidebar-target="menu" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow text-stone-600 bg-base-100 rounded-box w-52">
            <%= render "vendor/sidebar" %>
        <li>
          <details>
              <summary>
                <i class="fa-solid fa-user"></i>
                <%= current_user.email %>
              </summary>
            <%# 下拉選單 %>
            <ul class="w-32 text-stone-600 ">
              <li><%= link_to t('navbar.logout'), destroy_user_session_path, data: { turbo_method: "delete" } %></li>
              <li><%= link_to(t('navbar.edit_password'), edit_registration_path(:user)) %></li>
              <% if policy(:shop).index? %>
                <li><%= link_to t('navbar.mybackstage'), vendor_index_path, class: 'text-red-500' %></li>
              <% end %>
              <li><%= link_to t('navbar.mybookings'), orders_path %></li>
            </ul>
          </details>
        </li>
          </ul>
        </div>
      </div>
      <h1 class="btn btn-ghost text-2xl  text-secondary"><%= link_to "ResTime", root_path %></h1>
      <span class="btn btn-ghost text-secondary"><%= link_to t('navbar.homepage_front'), index_path %></span>

    </div>
    <%# 中間文字 %>
    <div class="flex-none navbar-end text-secondary p-2">
      <button class="btn btn-ghost btn-circle dropdown dropdown-end" >
        <div class="indicator">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
          <span id="badge" data-notification-target="element" class="badge badge-xs badge-primary indicator-item 
          <%= "hidden" if current_user.notifications.top_five.count == 0 %>" ></span>
        </div>
        <div id="notification" class="card overflow-auto mt-3 shadow dropdown-content z-[1] w-min bg-base-100 min-h-72 md:w-[500px]">
          <div class="card-content">
            <% current_user.notifications.top_five.each do |notification| %>
              <section id="notification_<%= notification.id%>" 
                        class="flex items-center space-between m-2" 
                        data-controller="notification" 
                        data-notification="<%= notification.id %>">
                  <p class="flex-shrink-0 w-4/12"><%= notification.title %></p>
                  <p class="flex-grow flex-wrap w-6/12">
                    <%= sanitize notification.message, tags: %w(a), attributes: %w(href) %>
                  </p>
                  <div class="btn btn-ghost btn-circle w-2/12" 
                        data-action="click->notification#delete" >
                    <i class="fa-solid fa-trash flex-shrink-0"> </i>
                  </div>
                  <hr>
              </section>
            <% end %>
          </div>
        </div>
      </button>
      <div class="badge badge-warning text-secondary text-s"><%= link_to t('navbar.mybackstage'), vendor_index_path %></div>
    </div>
  </nav>
</div>




